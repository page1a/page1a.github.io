(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{319:function(n,e,t){"use strict";t.r(e);var i=t(14),a=Object(i.a)({},(function(){var n=this._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[n("h1",{attrs:{id:"makefile项目管理demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#makefile项目管理demo"}},[this._v("#")]),this._v(" makefile项目管理demo")]),this._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v('PROJECT:=go-admin\n\n.PHONY: build\nbuild:\n\tCGO_ENABLED=0 go build -ldflags="-w -s" -a -installsuffix "" -o go-admin .\n\n# make build-linux\nbuild-linux:\n\t@docker build -t go-admin:latest .\n\t@echo "build successful"\n\nbuild-sqlite:\n\tgo build -tags sqlite3 -ldflags="-w -s" -a -installsuffix -o go-admin .\n\n# make run\nrun:\n    # delete go-admin-api container\n\t@if [ $(shell docker ps -aq --filter name=go-admin --filter publish=8000) ]; then docker rm -f go-admin; fi\n\n    # 启动方法一 run go-admin-api container  docker-compose 启动方式\n    # 进入到项目根目录 执行 make run 命令\n\t@docker-compose up -d\n\n\t# 启动方式二 docker run  这里注意-v挂载的宿主机的地址改为部署时的实际决对路径\n    #@docker run --name=go-admin -p 8000:8000 -v /home/code/go/src/go-admin/go-admin/config:/go-admin-api/config  -v /home/code/go/src/go-admin/go-admin-api/static:/go-admin/static -v /home/code/go/src/go-admin/go-admin/temp:/go-admin-api/temp -d --restart=always go-admin:latest\n\n\t@echo "go-admin service is running..."\n\n\t# delete Tag=<none> 的镜像\n\t@docker image prune -f\n\t@docker ps -a | grep "go-admin"\n\nstop:\n    # delete go-admin-api container\n\t@if [ $(shell docker ps -aq --filter name=go-admin --filter publish=8000) ]; then docker-compose down; fi\n\t#@if [ $(shell docker ps -aq --filter name=go-admin --filter publish=8000) ]; then docker rm -f go-admin; fi\n\t#@echo "go-admin stop success"\n\n\n#.PHONY: test\n#test:\n#\tgo test -v ./... -cover\n\n#.PHONY: docker\n#docker:\n#\tdocker build . -t go-admin:latest\n\n# make deploy\ndeploy:\n\n\t#@git checkout master\n\t#@git pull origin master\n\tmake build-linux\n\tmake run\n\n')])])])])}),[],!1,null,null,null);e.default=a.exports}}]);